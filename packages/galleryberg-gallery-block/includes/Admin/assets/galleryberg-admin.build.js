(function(o,b){typeof exports=="object"&&typeof module<"u"?b(require("react"),require("@wordpress/element"),require("@wordpress/i18n"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","@wordpress/element","@wordpress/i18n","react-dom"],b):(o=typeof globalThis<"u"?globalThis:o||self,b(o.React,o.wp.element,o.wp.i18n,o.ReactDOM))})(this,function(o,b,i,C){"use strict";var S={exports:{}},v={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=o,L=Symbol.for("react.element"),U=Symbol.for("react.fragment"),B=Object.prototype.hasOwnProperty,F=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function E(r,t,s){var l,n={},a=null,c=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(c=t.ref);for(l in t)B.call(t,l)&&!I.hasOwnProperty(l)&&(n[l]=t[l]);if(r&&r.defaultProps)for(l in t=r.defaultProps,t)n[l]===void 0&&(n[l]=t[l]);return{$$typeof:L,type:r,key:a,ref:c,props:n,_owner:F.current}}v.Fragment=U,v.jsx=E,v.jsxs=E,S.exports=v;var e=S.exports;const V={path:null,title:"no_title",element:null};function G(r){this.options={...V,...r},this.getPath=()=>this.options.path,this.getTitle=()=>this.options.title,this.getElement=()=>this.options.element}const R=r=>r.map(t=>new G(t));function W({title:r,targetPath:t,isActive:s,setRoute:l}){return e.jsx("button",{className:"galleryberg-menu-navigation-header-button","data-active":s,onClick:()=>l(t),children:r})}function Y({routes:r,currentRoutePath:t,setRoute:s}){const[l,n]=o.useState({});return o.useEffect(()=>{const a={gridTemplateColumns:`repeat(${r.length}, minmax(0,1fr))`};n(a)},[r]),e.jsx("div",{style:l,className:"galleryberg-menu-navigation",children:r.map(a=>e.jsx(W,{title:a.getTitle(),targetPath:a.getPath(),isActive:t===a.getPath(),setRoute:s},a.getPath()))})}function T(){this.name="ButtonLinkNoUrlError",this.message="No URL is provided for ButtonLink component."}T.prototype=Object.create(Error.prototype);const x={DEFAULT:"default"};function N({title:r,url:t=null,onClickHandler:s=null,type:l=x.DEFAULT}){o.useEffect(()=>{if(!t&&!s)throw new T},[]);const n=()=>{window.open(t,"_blank")},a=c=>{s&&typeof s=="function"?s(c):n()};return e.jsx("div",{className:"galleryberg-button-link","data-buttonlink-type":l,onClick:a,role:"button",children:r})}function H(){var c;const r=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.welcome)||{},t=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.video)||{},s=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.documentation)||{},l=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.support)||{},n=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.upgrade)||{},a=(c=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:c.pro_status;return e.jsxs("div",{className:"galleryberg-welcome-content",children:[e.jsxs("div",{className:"galleryberg-welcome-content__main",children:[e.jsxs("div",{className:"galleryberg-welcome-video-section galleryberg-card",children:[e.jsxs("div",{className:"galleryberg-card-welcome",children:[e.jsx("h2",{children:r.title||i.__("Welcome to Galleryberg!","galleryberg-gallery-block")}),e.jsx("p",{children:r.content||i.__("Elevate Your Content with Beautiful Galleries - The Ultimate WordPress Block Editor Plugin for Effortless Gallery Creation!","galleryberg-gallery-block")})]}),e.jsx("div",{className:"galleryberg-card-video",children:e.jsx("div",{className:"galleryberg-video-wrapper",children:e.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${t.video_id}`,title:t.title||i.__("Galleryberg Tutorial","galleryberg-gallery-block"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}),!a&&n.title&&e.jsxs("div",{className:"galleryberg-card galleryberg-card-upgrade",children:[e.jsx("h3",{children:n.title}),e.jsx("p",{children:n.content}),e.jsx("a",{href:n.url||"https://galleryberg.com/pricing/",target:"_blank",rel:"noopener noreferrer",className:"button button-primary button-upgrade",children:n.button||i.__("GET GALLERYBERG PRO","galleryberg-gallery-block")})]})]}),e.jsxs("div",{className:"galleryberg-welcome-content__sidebar",children:[e.jsxs("div",{className:"galleryberg-card",children:[e.jsx("h3",{children:s.title||i.__("Documentation","galleryberg-gallery-block")}),e.jsx("p",{children:s.content||i.__("Elevate your space with Galleryberg: a sleek, modern gallery block for style and functionality.","galleryberg-gallery-block")}),e.jsx(N,{url:s.url||"https://galleryberg.com/docs/",title:i.__("Visit Documents","galleryberg-gallery-block"),type:x.DEFAULT})]}),e.jsxs("div",{className:"galleryberg-card",children:[e.jsx("h3",{children:l.title||i.__("Support","galleryberg-gallery-block")}),e.jsx("p",{children:l.content||i.__("Visit our Galleryberg Support Page for quick solutions and assistance.","galleryberg-gallery-block")}),e.jsx(N,{url:l.url||"https://galleryberg.com/support/",title:i.__("Support Forum","galleryberg-gallery-block"),type:x.DEFAULT})]})]})]})}function K(){var l;const r=(l=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:l.pro_status,t=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.features)||{},s=t.list||[];return e.jsxs("div",{className:"galleryberg-features-content",children:[e.jsxs("div",{className:"galleryberg-features-header",children:[e.jsx("h2",{children:t.title||i.__("Gallery Features","galleryberg-gallery-block")}),e.jsx("p",{children:t.description||i.__("Explore the powerful features available in Galleryberg Gallery Block.","galleryberg-gallery-block")})]}),e.jsx("div",{className:"galleryberg-features-grid",children:s.map((n,a)=>e.jsxs("div",{className:`galleryberg-card galleryberg-feature-card ${n.is_pro?"is-pro-feature":""}`,children:[e.jsxs("div",{className:"feature-header",children:[e.jsx("h3",{children:n.title}),n.is_pro&&e.jsx("span",{className:"pro-badge",children:i.__("PRO","galleryberg-gallery-block")})]}),e.jsx("p",{children:n.description}),n.is_pro&&!r&&e.jsx("a",{href:"https://galleryberg.com/pricing/",target:"_blank",rel:"noopener noreferrer",className:"upgrade-link",children:i.__("Upgrade to unlock →","galleryberg-gallery-block")})]},a))})]})}const D=[{path:"welcome",title:"Welcome",element:e.jsx(H,{})},{path:"features",title:"Features",element:e.jsx(K,{})},{path:"404",title:"404",element:e.jsx("div",{children:"404"})}],O=R(D);function J({from:r,to:t,onCloseHandler:s,onOperationStart:l,reloadDelay:n=5e3}){const a={NOT_STARTED:"notStarted",STARTED:"started",FINISHED:"finished"},c={OK:"ok",ERROR:"error"},p=(h,te=c.OK)=>({type:te,message:h}),[u,g]=o.useState(a.NOT_STARTED),[y,k]=o.useState(n/1e3),[j,m]=o.useState(p("")),f=r>t,d=o.useRef(n),_=()=>{g(a.STARTED),l().then(({message:h})=>{m(p(h,c.OK))}).catch(({message:h})=>{m(p(h,c.ERROR))}).finally(()=>{g(a.FINISHED),w()})},w=()=>{const h=setInterval(()=>{d.current<=0?(window.location.reload(),clearInterval(h)):(d.current=d.current-1e3,k(d.current/1e3))},1e3)};return e.jsxs("div",{className:"version-control-popup",children:[e.jsx("div",{className:"modal-backdrop",onClick:s,role:"presentation"}),e.jsxs("div",{className:"modal-container",children:[e.jsxs("div",{className:"rollback-versions",children:[e.jsx("div",{className:`version-id ${f?"version-positive":"version-negative"}`,children:r}),e.jsx("div",{className:"version-icon","data-in-progress":JSON.stringify(u===a.STARTED),children:e.jsx("div",{className:"version-icon-inner",children:e.jsx("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"right-long",className:"svg-inline--fa fa-right-long",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M334.5 414c8.8 3.8 19 2 26-4.6l144-136c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22l0 72L32 192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l288 0 0 72c0 9.6 5.7 18.2 14.5 22z"})})})}),e.jsx("div",{className:`version-id ${f?"version-negative":"version-positive"}`,children:t})]}),u!==a.STARTED&&e.jsxs("div",{className:"version-content",children:[u===a.NOT_STARTED&&e.jsxs("div",{className:"version-warning",children:[e.jsx("div",{children:i.__("Older versions might be unstable. Do it on your own risk and create a backup.","galleryberg-gallery-block")}),e.jsxs("div",{className:"version-button-container",children:[e.jsx("button",{className:"button button-primary",onClick:_,children:i.__("Start","galleryberg-gallery-block")}),e.jsx("button",{className:"button button-secondary",onClick:s,children:i.__("Close","galleryberg-gallery-block")})]})]}),u===a.FINISHED&&e.jsxs("div",{className:"operation-finished-wrapper",children:[e.jsx("div",{className:"version-control-response","data-resp-type":j.type,children:j.message}),e.jsx("div",{children:y<=0?`${i.__("Reloading page now…","galleryberg-gallery-block")}`:`${i.__("Reloading page in ","galleryberg-gallery-block")} ${y}...`})]})]})]})]})}function z({target:r,children:t}){const s=o.useRef(null);return s.current||(s.current=document.createElement("div")),o.useEffect(()=>{const l=s.current;return r.appendChild(l),()=>{r.removeChild(l)}},[r]),C.createPortal(t,s.current)}function Q({currentVersion:r,availableVersions:t,onSelect:s}){const l=o.useMemo(()=>t.filter(n=>n!==r),[t,r]);return e.jsx("div",{className:"galleryberg-header-version-info",children:e.jsxs("select",{value:r,onChange:n=>s(n.target.value),children:[e.jsx("option",{disabled:!0,value:r,children:r}),l.map(n=>e.jsx("option",{value:n,children:n},n))]})})}function X({pluginVersion:r,allVersions:t,onVersionRollBack:s}){const[l,n]=o.useState(r),[a,c]=o.useState(!1),p=o.useMemo(()=>t.sort().reverse(),[t]),u=y=>{n(y),c(!0)},g=()=>s(l);return e.jsxs("div",{className:"version-control-container",children:[e.jsx(Q,{availableVersions:p,currentVersion:l,onSelect:u}),a&&e.jsx(z,{target:document.body,children:e.jsx(J,{onCloseHandler:()=>{n(r),c(!1)},from:r,to:l,onOperationStart:g})})]})}function Z({currentRoutePath:r,setCurrentRoutePath:t}){var p,u;o.useEffect(()=>{const g=new URL(window.location.href);g.searchParams.set("route",r),window.history.pushState(null,null,g.href)},[r]);const s=o.useMemo(()=>O.slice(0,O.length-1),[]),l=(p=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.assets)==null?void 0:p.logo,n=(u=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:u.pro_status,a=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.versionControl,c=g=>{var f;if(!((f=a==null?void 0:a.ajax)!=null&&f.versionRollback))return Promise.reject({message:i.__("Version control data not available","galleryberg-gallery-block")});const{url:y,action:k,nonce:j}=a.ajax.versionRollback,m=new FormData;return m.append("action",k),m.append("nonce",j),m.append("version",g),fetch(y,{method:"POST",body:m}).then(d=>d.json()).then(d=>{var _,w;if(d.error||!d.success)throw new Error(d.error||((_=d.data)==null?void 0:_.error)||"Unknown error");return{message:((w=d.data)==null?void 0:w.message)||"Success"}}).catch(d=>Promise.reject({message:d.message}))};return e.jsx("div",{className:"header-wrapper",children:e.jsxs("div",{className:"menu-header",children:[e.jsx("div",{className:"left-container",children:e.jsxs("div",{className:"logo-container",children:[l&&e.jsx("img",{alt:"plugin logo",src:l}),e.jsx("div",{className:"galleryberg-plugin-logo-text",children:"Galleryberg"})]})}),e.jsx("div",{className:"galleryberg-menu-navigation-wrapper",children:e.jsx(Y,{routes:s,currentRoutePath:r,setRoute:t})}),e.jsxs("div",{className:"right-container",children:[a&&a.currentVersion&&e.jsx("div",{className:"version-control-header-wrapper",children:e.jsx(X,{pluginVersion:a.currentVersion,allVersions:a.versions||[],onVersionRollBack:c})}),!n&&e.jsx(N,{url:"https://galleryberg.com/pricing/",title:i.__("Upgrade to PRO","galleryberg-gallery-block"),type:x.DEFAULT})]})]})})}function P({routes:r,currentRoutePath:t}){const[s,l]=o.useState(null);return o.useEffect(()=>{let n=null;for(const a of r)if(a.getPath()===t){n=a;break}!n&&r.length>0&&(n=r[r.length-1]),n&&l(n.getElement())},[t,r]),e.jsx("div",{className:"galleryberg-router-content",children:s})}function q({children:r,currentRoutePath:t,setCurrentRoutePath:s}){const l=o.useMemo(()=>R(D),[]);return e.jsx(P,{routes:l,currentRoutePath:t})}function $({currentRoutePath:r,setCurrentRoutePath:t}){return e.jsx(q,{currentRoutePath:r,setCurrentRoutePath:t,children:e.jsx(P,{})})}function ee(){const t=new URL(window.location.href).searchParams.get("route"),[s,l]=o.useState(t??"welcome");return e.jsxs("div",{className:"galleryberg-admin-menu-container",children:[e.jsx(Z,{currentRoutePath:s,setCurrentRoutePath:l}),e.jsx($,{currentRoutePath:s,setCurrentRoutePath:l})]})}function re({children:r}){return o.useEffect(()=>{const t=document.querySelector("#wpcontent"),s=document.querySelector("#wpbody"),l=document.querySelector("#wpadminbar");if(s){const n=l?l.offsetHeight:0;s.style.height=`calc( 100vh - ${n}px)`,t.style.padding=0}},[]),e.jsx("div",{className:"galleryberg-admin-menu-wrapper",children:r})}const A=document.querySelector("#galleryberg-admin-menu");A&&b.render(e.jsx(re,{children:e.jsx(ee,{})}),A)});

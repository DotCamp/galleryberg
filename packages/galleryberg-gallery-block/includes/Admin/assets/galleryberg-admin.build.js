(function(o,y){typeof exports=="object"&&typeof module<"u"?y(require("react"),require("@wordpress/element"),require("@wordpress/i18n"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","@wordpress/element","@wordpress/i18n","react-dom"],y):(o=typeof globalThis<"u"?globalThis:o||self,y(o.React,o.wp.element,o.wp.i18n,o.ReactDOM))})(this,function(o,y,d,C){"use strict";var R={exports:{}},v={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=o,L=Symbol.for("react.element"),U=Symbol.for("react.fragment"),F=Object.prototype.hasOwnProperty,I=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function E(t,r,l){var n,s={},a=null,i=null;l!==void 0&&(a=""+l),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(i=r.ref);for(n in r)F.call(r,n)&&!B.hasOwnProperty(n)&&(s[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return{$$typeof:L,type:t,key:a,ref:i,props:s,_owner:I.current}}v.Fragment=U,v.jsx=E,v.jsxs=E,R.exports=v;var e=R.exports;const V={path:null,title:"no_title",element:null};function G(t){this.options={...V,...t},this.getPath=()=>this.options.path,this.getTitle=()=>this.options.title,this.getElement=()=>this.options.element}const k=t=>t.map(r=>new G(r));function H({title:t,targetPath:r,isActive:l,setRoute:n}){return e.jsx("button",{className:"galleryberg-menu-navigation-header-button","data-active":l,onClick:()=>n(r),children:t})}function W({routes:t,currentRoutePath:r,setRoute:l}){const[n,s]=o.useState({});return o.useEffect(()=>{const a={gridTemplateColumns:`repeat(${t.length}, minmax(0,1fr))`};s(a)},[t]),e.jsx("div",{style:n,className:"galleryberg-menu-navigation",children:t.map(a=>e.jsx(H,{title:a.getTitle(),targetPath:a.getPath(),isActive:r===a.getPath(),setRoute:l},a.getPath()))})}function T(){this.name="ButtonLinkNoUrlError",this.message="No URL is provided for ButtonLink component."}T.prototype=Object.create(Error.prototype);const x={DEFAULT:"default"};function _({title:t,url:r=null,onClickHandler:l=null,type:n=x.DEFAULT}){o.useEffect(()=>{if(!r&&!l)throw new T},[]);const s=()=>{window.open(r,"_blank")},a=i=>{l&&typeof l=="function"?l(i):s()};return e.jsx("div",{className:"galleryberg-button-link","data-buttonlink-type":n,onClick:a,role:"button",children:t})}function K(){var i;const t=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.welcome)||{},r=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.video)||{},l=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.documentation)||{},n=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.support)||{},s=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.upgrade)||{},a=(i=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:i.pro_status;return e.jsxs("div",{className:"galleryberg-welcome-content",children:[e.jsxs("div",{className:"galleryberg-welcome-content__main",children:[e.jsxs("div",{className:"galleryberg-welcome-video-section galleryberg-card",children:[e.jsxs("div",{className:"galleryberg-card-welcome",children:[e.jsx("h2",{children:t.title}),e.jsx("p",{children:t.content})]}),e.jsx("div",{className:"galleryberg-card-video",children:e.jsx("div",{className:"galleryberg-video-wrapper",children:e.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${r.video_id}`,title:r.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}),!a&&s.title&&e.jsxs("div",{className:"galleryberg-card galleryberg-card-upgrade",children:[e.jsx("h3",{children:s.title}),e.jsx("p",{children:s.content}),e.jsx("a",{href:s.url||"https://galleryberg.com/pricing/",target:"_blank",rel:"noopener noreferrer",className:"button button-primary button-upgrade",children:s.button})]})]}),e.jsxs("div",{className:"galleryberg-welcome-content__sidebar",children:[e.jsxs("div",{className:"galleryberg-card",children:[e.jsx("h3",{children:l.title}),e.jsx("p",{children:l.content}),e.jsx(_,{url:l.url||"https://galleryberg.com/docs/",title:l.button,type:x.DEFAULT})]}),e.jsxs("div",{className:"galleryberg-card",children:[e.jsx("h3",{children:n.title}),e.jsx("p",{children:n.content}),e.jsx(_,{url:n.url||"https://galleryberg.com/contact/",title:n.button,type:x.DEFAULT})]})]})]})}function Y(){var n;const t=(n=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:n.pro_status,r=(gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.features)||{},l=r.list||[];return e.jsxs("div",{className:"galleryberg-features-content",children:[e.jsxs("div",{className:"galleryberg-features-header",children:[e.jsx("h2",{children:r.title||d.__("Gallery Features","galleryberg-gallery-block")}),e.jsx("p",{children:r.description||d.__("Explore the powerful features available in Galleryberg Gallery Block.","galleryberg-gallery-block")})]}),e.jsx("div",{className:"galleryberg-features-grid",children:l.map((s,a)=>e.jsxs("div",{className:`galleryberg-card galleryberg-feature-card ${s.is_pro?"is-pro-feature":""}`,children:[e.jsxs("div",{className:"feature-header",children:[e.jsx("h3",{children:s.title}),s.is_pro&&e.jsx("span",{className:"pro-badge",children:d.__("PRO","galleryberg-gallery-block")})]}),e.jsx("p",{children:s.description}),s.is_pro&&!t&&e.jsx("a",{href:"https://galleryberg.com/pricing/",target:"_blank",rel:"noopener noreferrer",className:"upgrade-link",children:d.__("Upgrade to unlock →","galleryberg-gallery-block")})]},a))})]})}const D=[{path:"welcome",title:"Welcome",element:e.jsx(K,{})},{path:"features",title:"Features",element:e.jsx(Y,{})},{path:"404",title:"404",element:e.jsx("div",{children:"404"})}],O=k(D);function J({from:t,to:r,onCloseHandler:l,onOperationStart:n,reloadDelay:s=5e3}){const a={NOT_STARTED:"notStarted",STARTED:"started",FINISHED:"finished"},i={OK:"ok",ERROR:"error"},m=(h,re=i.OK)=>({type:re,message:h}),[u,g]=o.useState(a.NOT_STARTED),[b,S]=o.useState(s/1e3),[j,p]=o.useState(m("")),f=t>r,c=o.useRef(s),w=()=>{g(a.STARTED),n().then(({message:h})=>{p(m(h,i.OK))}).catch(({message:h})=>{p(m(h,i.ERROR))}).finally(()=>{g(a.FINISHED),N()})},N=()=>{const h=setInterval(()=>{c.current<=0?(window.location.reload(),clearInterval(h)):(c.current=c.current-1e3,S(c.current/1e3))},1e3)};return e.jsxs("div",{className:"version-control-popup",children:[e.jsx("div",{className:"modal-backdrop",onClick:l,role:"presentation"}),e.jsxs("div",{className:"modal-container",children:[e.jsxs("div",{className:"rollback-versions",children:[e.jsx("div",{className:`version-id ${f?"version-positive":"version-negative"}`,children:t}),e.jsx("div",{className:"version-icon","data-in-progress":JSON.stringify(u===a.STARTED),children:e.jsx("div",{className:"version-icon-inner",children:e.jsx("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"right-long",className:"svg-inline--fa fa-right-long",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",d:"M334.5 414c8.8 3.8 19 2 26-4.6l144-136c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22l0 72L32 192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l288 0 0 72c0 9.6 5.7 18.2 14.5 22z"})})})}),e.jsx("div",{className:`version-id ${f?"version-negative":"version-positive"}`,children:r})]}),u!==a.STARTED&&e.jsxs("div",{className:"version-content",children:[u===a.NOT_STARTED&&e.jsxs("div",{className:"version-warning",children:[e.jsx("div",{children:d.__("Older versions might be unstable. Do it on your own risk and create a backup.","galleryberg-gallery-block")}),e.jsxs("div",{className:"version-button-container",children:[e.jsx("button",{className:"button button-primary",onClick:w,children:d.__("Start","galleryberg-gallery-block")}),e.jsx("button",{className:"button button-secondary",onClick:l,children:d.__("Close","galleryberg-gallery-block")})]})]}),u===a.FINISHED&&e.jsxs("div",{className:"operation-finished-wrapper",children:[e.jsx("div",{className:"version-control-response","data-resp-type":j.type,children:j.message}),e.jsx("div",{children:b<=0?`${d.__("Reloading page now…","galleryberg-gallery-block")}`:`${d.__("Reloading page in ","galleryberg-gallery-block")} ${b}...`})]})]})]})]})}function z({target:t,children:r}){const l=o.useRef(null);return l.current||(l.current=document.createElement("div")),o.useEffect(()=>{const n=l.current;return t.appendChild(n),()=>{t.removeChild(n)}},[t]),C.createPortal(r,l.current)}function Q({currentVersion:t,availableVersions:r,onSelect:l}){const n=o.useMemo(()=>r.filter(s=>s!==t),[r,t]);return e.jsx("div",{className:"galleryberg-header-version-info",children:e.jsxs("select",{value:t,onChange:s=>l(s.target.value),children:[e.jsx("option",{disabled:!0,value:t,children:t}),n.map(s=>e.jsx("option",{value:s,children:s},s))]})})}function X({pluginVersion:t,allVersions:r,onVersionRollBack:l}){const[n,s]=o.useState(t),[a,i]=o.useState(!1),m=o.useMemo(()=>r.sort().reverse(),[r]),u=b=>{s(b),i(!0)},g=()=>l(n);return e.jsxs("div",{className:"version-control-container",children:[e.jsx(Q,{availableVersions:m,currentVersion:n,onSelect:u}),a&&e.jsx(z,{target:document.body,children:e.jsx(J,{onCloseHandler:()=>{s(t),i(!1)},from:t,to:n,onOperationStart:g})})]})}function Z({currentRoutePath:t,setCurrentRoutePath:r}){var m,u;o.useEffect(()=>{const g=new URL(window.location.href);g.searchParams.set("route",t),window.history.pushState(null,null,g.href)},[t]);const l=o.useMemo(()=>O.slice(0,O.length-1),[]),n=(m=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.assets)==null?void 0:m.logo,s=(u=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.misc)==null?void 0:u.pro_status,a=gallerybergAdminMenuData==null?void 0:gallerybergAdminMenuData.versionControl,i=g=>{var f;if(!((f=a==null?void 0:a.ajax)!=null&&f.versionRollback))return Promise.reject({message:d.__("Version control data not available","galleryberg-gallery-block")});const{url:b,action:S,nonce:j}=a.ajax.versionRollback,p=new FormData;return p.append("action",S),p.append("nonce",j),p.append("version",g),fetch(b,{method:"POST",body:p}).then(c=>c.json()).then(c=>{var w,N;if(c.error||!c.success)throw new Error(c.error||((w=c.data)==null?void 0:w.error)||"Unknown error");return{message:((N=c.data)==null?void 0:N.message)||"Success"}}).catch(c=>Promise.reject({message:c.message}))};return e.jsx("div",{className:"header-wrapper",children:e.jsxs("div",{className:"menu-header",children:[e.jsx("div",{className:"left-container",children:e.jsxs("div",{className:"logo-container",children:[n&&e.jsx("img",{alt:"plugin logo",src:n}),e.jsx("div",{className:"galleryberg-plugin-logo-text",children:"Galleryberg"})]})}),e.jsx("div",{className:"galleryberg-menu-navigation-wrapper",children:e.jsx(W,{routes:l,currentRoutePath:t,setRoute:r})}),e.jsxs("div",{className:"right-container",children:[a&&a.currentVersion&&e.jsx("div",{className:"version-control-header-wrapper",children:e.jsx(X,{pluginVersion:a.currentVersion,allVersions:a.versions||[],onVersionRollBack:i})}),!s&&e.jsx(_,{url:"https://galleryberg.com/pricing/",title:d.__("Upgrade to PRO","galleryberg-gallery-block"),type:x.DEFAULT})]})]})})}function A({routes:t,currentRoutePath:r}){const[l,n]=o.useState(null);return o.useEffect(()=>{let s=null;for(const a of t)if(a.getPath()===r){s=a;break}!s&&t.length>0&&(s=t[t.length-1]),s&&n(s.getElement())},[r,t]),e.jsx("div",{className:"galleryberg-router-content",children:l})}function q({children:t,currentRoutePath:r,setCurrentRoutePath:l}){const n=o.useMemo(()=>k(D),[]);return e.jsx(A,{routes:n,currentRoutePath:r})}function $({currentRoutePath:t,setCurrentRoutePath:r}){return e.jsx(q,{currentRoutePath:t,setCurrentRoutePath:r,children:e.jsx(A,{})})}function ee(){const r=new URL(window.location.href).searchParams.get("route"),[l,n]=o.useState(r??"welcome");return e.jsxs("div",{className:"galleryberg-admin-menu-container",children:[e.jsx(Z,{currentRoutePath:l,setCurrentRoutePath:n}),e.jsx($,{currentRoutePath:l,setCurrentRoutePath:n})]})}function te({children:t}){return o.useEffect(()=>{const r=document.querySelector("#wpcontent"),l=document.querySelector("#wpbody"),n=document.querySelector("#wpadminbar");if(l){const s=n?n.offsetHeight:0;l.style.height=`calc( 100vh - ${s}px)`,r.style.padding=0}},[]),e.jsx("div",{className:"galleryberg-admin-menu-wrapper",children:t})}const P=document.querySelector("#galleryberg-admin-menu");P&&y.render(e.jsx(te,{children:e.jsx(ee,{})}),P)});
